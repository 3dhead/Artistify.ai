(this["webpackJsonpartistify.ai"]=this["webpackJsonpartistify.ai"]||[]).push([[0],{112:function(e,t,a){e.exports=a.p+"static/media/logotext.f4b040c3.svg"},155:function(e,t,a){e.exports=a(188)},160:function(e,t,a){},161:function(e,t,a){},166:function(e,t,a){},170:function(e,t){},171:function(e,t){},182:function(e,t){},185:function(e,t){},186:function(e,t){},187:function(e,t,a){},188:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(31),l=a.n(o),i=(a(160),a(8)),s=(a(161),a(140)),c=a(233),m=a(234),u=a(219),h=a(222),d=a(223),g=a(225),p=a(237),f=a(227),v=a(238),b=a(228),E=a(95),y=a.n(E),w=a(118),S=a.n(w),k=a(119),x=a.n(k),C=a(112),N=a.n(C),j=Object(u.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1,textAlign:"left",verticalAlign:"bottom"}}})),O=r.a.forwardRef((function(e,t){return r.a.createElement(h.a,Object.assign({direction:"up",ref:t},e))})),R=function(e){var t=j(),a=r.a.useState(!1),n=Object(i.a)(a,2),o=n[0],l=n[1],s=function(){l(!1)};return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement("div",{className:t.title},r.a.createElement("img",{src:N.a,height:"38px",alt:"logo with text",className:t.title})),r.a.createElement(p.a,{title:"Github Repo Link"},r.a.createElement(f.a,{"aria-label":"github repo","aria-controls":"menu-appbar",color:"inherit"},r.a.createElement("a",{href:"https://github.com/rahul-jha98/Artistify.ai",rel:"noopener noreferrer",target:"_blank",style:{color:"inherit",textDecoration:"none",height:24}},r.a.createElement(y.a,null)))),r.a.createElement(p.a,{title:"About"},r.a.createElement(f.a,{"aria-label":"about","aria-controls":"menu-appbar",color:"inherit",onClick:function(){l(!0)}},r.a.createElement(S.a,null))))),r.a.createElement(v.a,{fullScreen:!0,open:o,onClose:s,TransitionComponent:O},r.a.createElement(g.a,null,r.a.createElement(b.a,{variant:"h5",style:{textAlign:"center"},className:t.title},r.a.createElement("b",null,"About Artistify.ai")),r.a.createElement(f.a,{edge:"end",color:"inherit",onClick:s,"aria-label":"close"},r.a.createElement(x.a,null))),r.a.createElement("div",{className:"container"},r.a.createElement(b.a,{variant:"h5"},"How is this sorcery happening?"),r.a.createElement(b.a,{style:{fontSize:"1rem"},gutterBottom:!0,color:"textSecondary"},"Neural Style Transfer is an algorithm that aims at recreating the given content image drawn in the style of another image known as the style image. Now, with a photograph as content and a painting as style image we can see some wonderful art being generated.",r.a.createElement("br",null),r.a.createElement("br",null),"Yet, the original implementation of Neural Style Transfer was slow taking many iterations over the image which took anywhere around a few minutes to hours. But recently algorithms have been proposed to make this process much faster. We have reached a level where we can apply it in real time between any two images. This arbitrary style transfer algorithm is what is running in the browser to make the magic happens."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a,{variant:"h5"},"What's going on inside the model?"),r.a.createElement(b.a,{style:{fontSize:"1rem"},gutterBottom:!0,color:"textSecondary"},"The complete model is divided in two parts : Style Extractor and Transformer Model.",r.a.createElement("br",null),r.a.createElement("b",null,"The Style Extractor")," is responsible for extracting the style representation from the given image. Passing the content and style images through this gives us their respective style feature representation. Then their weighted average is taken to incorporate varying degree of stylization strength in the model.",r.a.createElement("br",null),r.a.createElement("b",null,"The Transformer")," is responsible for generating the target image for a given style features. It is trained to generate images that have similar content structure as content image but since it uses the syle image features when the model creates the image it is forced to use the style features giving us the styled image as the output.",r.a.createElement("br",null),"I have tried creating a basic implementation of arbitrary style transfer using AdaIN in a jupyter-notebook for understanding. It gives a rough idea of the working so that you can get a clear idea.",r.a.createElement(b.a,{style:{fontSize:"1rem"},gutterBottom:!0,color:"primary"},r.a.createElement("a",{href:"https://github.com/rahul-jha98/StyleTransfer_using_AdaIN",rel:"noopener noreferrer",target:"_blank",style:{textDecoration:"none",color:"inherit"}},"The repo can be found here."))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a,{variant:"h5"},"Is my data safe?"),r.a.createElement(b.a,{style:{fontSize:"1rem"},gutterBottom:!0,color:"textSecondary"},"If you have used the application you might have noticed the slight lag in UI when the actual stylization is going on. Well, it happens because the whole model is running right in your browser using your CPU for the task. Thus there is no need to send any image to any server for processing and hence your data never leaves your system."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(b.a,{variant:"h5"},"What is the difference between lite and normal mode?"),r.a.createElement(b.a,{style:{fontSize:"1rem"},gutterBottom:!0,color:"textSecondary"},"While lite mode requires download of model of size around 10MB, normal mode downloads a model of size 45 MB. The ",r.a.createElement("b",null,"normal mode")," uses the original implementation from paper i.e. Inception-v3 model for style extraction and plain convolution layers based transformer model. The ",r.a.createElement("b",null,"lite mode")," on the other hand uses the light weight MobileNet-v2 for extracting styles and depthwise separable convolution layer for the transformer network."))))},P=a(5),z=a(10),M=a(14),A=a(15),T=a(24),D=a(232),_=a(77),B=a.n(_),I=a(229),H=a(231),F=a(236),W=a(240),L=a(241),V=a(230),G=a(235),U=a(239),J=Object(T.a)((function(e){return{root:{height:6,color:e.palette.secondary.light},thumb:{height:18,width:18,marginTop:-6,marginLeft:-9},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{color:"dark"===e.palette.type?"#3f3f3f":"#cfd8dc",height:6,borderRadius:4},rail:{color:"dark"===e.palette.type?"#3f3f3f":"#cfd8dc",height:6,borderRadius:4}}}))(U.a),q=function(e){return r.a.createElement(J,Object.assign({onChange:e.sliderChangeHandler},e,{style:{marginTop:2},value:e.value}))},K=function(e){Object(M.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleMenu=function(e){"webcam"!==e.target.value&&"upload"!==e.target.value&&n.setState({image:e.target.value,imageSrc:"./content/"+e.target.value+".jpg"})},n.onSliderValueChange=function(e,t){n.setState({imgHeight:t})},n.handlePopoverOpen=function(e){n.setState({anchorEl:e.currentTarget})},n.handlePopoverClose=function(){n.setState({anchorEl:null})},n.state={image:"stata",imageSrc:"./content/stata.jpg",imgHeight:250,menulist:[{value:"webcam",name:"Take a picture"},{value:"upload",name:"Upload a picture"},{value:"chicago",name:"Chicago"},{value:"diana",name:"Diana"},{value:"golden_gate",name:"Golden Gate"},{value:"stata",name:"Stata"},{value:"statue_of_liberty",name:"Statue of Liberty"}],anchorEl:null},n}return Object(z.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:"selector-container"},r.a.createElement("img",{ref:this.props.refObject,className:"center",src:this.state.imageSrc,height:this.state.imgHeight,alt:"content_img"}),r.a.createElement("br",null),r.a.createElement("div",{className:e.formControl,style:{marginBottom:".1rem",display:"inline-block",verticalAlign:"middle"}},r.a.createElement(b.a,{style:{display:"inline-block",marginRight:"6px"}},"Content Image size"),r.a.createElement(B.a,{fontSize:"small",color:"action",style:{marginBottom:-4},"aria-owns":this.state.anchorEl?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:this.handlePopoverOpen,onMouseLeave:this.handlePopoverClose}),r.a.createElement(I.a,{id:"mouse-over-popover",className:e.popover,classes:{paper:e.paper},open:this.state.anchorEl,anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},onClose:this.state.handlePopoverClose,disableRestoreFocus:!0},r.a.createElement(b.a,{style:{maxWidth:200,textAlign:"center"}},"A large content image leads to a more detailed output at the cost of increased processing time."))),r.a.createElement(q,{className:e.formControl,sliderChangeHandler:this.onSliderValueChange,value:this.state.imgHeight,min:250,max:400,step:1,disabled:this.props.isDisabled}),r.a.createElement(V.a,{variant:"outlined",className:e.formControl,disabled:this.props.isDisabled},r.a.createElement(W.a,{id:"content-label",color:"secondary"},"Content Image"),r.a.createElement(G.a,{labelId:"content-label",id:"content-select",value:this.state.image,onChange:this.handleMenu,label:"Content Image",color:"secondary"},this.state.menulist.map((function(e){return r.a.createElement(L.a,{key:e.value,value:e.value},e.name)})))))}}]),a}(r.a.Component),Y=Object(T.a)((function(e){return{formControl:{margin:e.spacing(1),width:"100%",maxWidth:600,textAlign:"left"},popover:{pointerEvents:"none"},paper:{padding:e.spacing(2)}}}))(K),Q=function(e){Object(M.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleMenu=function(e){"random"!==e.target.value&&"upload"!==e.target.value&&n.setState({image:e.target.value,imageSrc:"./style/"+e.target.value+".jpg"})},n.onSliderValueChange=function(e,t){n.setState({imgHeight:t})},n.handlePopoverOpen=function(e){n.setState({anchorEl:e.currentTarget})},n.handlePopoverClose=function(){n.setState({anchorEl:null})},n.state={image:"seaport",imageSrc:"./style/seaport.jpg",imgHeight:250,menulist:[{value:"upload",name:"Upload a picture"},{value:"random",name:"Random image from wikiart.org"},{value:"clouds",name:"Clouds"},{value:"towers",name:"Towers"},{value:"sketch",name:"Sketch"},{value:"udnie",name:"Udnie"},{value:"seaport",name:"Seaport"}],anchorEl:null},n}return Object(z.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:"selector-container"},r.a.createElement("img",{ref:this.props.refObject,className:"center",src:this.state.imageSrc,height:this.state.imgHeight,alt:"content_img"}),r.a.createElement("br",null),r.a.createElement("div",{className:e.formControl,style:{marginBottom:".1rem",display:"inline-block",verticalAlign:"middle"}},r.a.createElement(b.a,{style:{display:"inline-block",marginRight:"6px"}},"Style Image size"),r.a.createElement(B.a,{fontSize:"small",color:"action",style:{marginBottom:-4},"aria-owns":this.state.anchorEl?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:this.handlePopoverOpen,onMouseLeave:this.handlePopoverClose}),r.a.createElement(I.a,{id:"mouse-over-popover",className:e.popover,classes:{paper:e.paper},open:this.state.anchorEl,anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},onClose:this.state.handlePopoverClose,disableRestoreFocus:!0},r.a.createElement(b.a,{style:{maxWidth:200,textAlign:"center"}},"Changing the size of style image affects the texture seen by the network thus changing the pattern used in generated image."))),r.a.createElement(q,{className:e.formControl,sliderChangeHandler:this.onSliderValueChange,value:this.state.imgHeight,min:100,max:400,step:1,disabled:this.props.isDisabled}),r.a.createElement(V.a,{variant:"outlined",className:e.formControl,disabled:this.props.isDisabled},r.a.createElement(W.a,{id:"content-label",color:"secondary"},"Style Image"),r.a.createElement(G.a,{labelId:"content-label",id:"content-select",value:this.state.image,onChange:this.handleMenu,color:"secondary",label:"Style Image"},this.state.menulist.map((function(e){return r.a.createElement(L.a,{key:e.value,value:e.value},e.name)})))))}}]),a}(r.a.Component),X=Object(T.a)((function(e){return{formControl:{margin:e.spacing(1),width:"100%",maxWidth:600,textAlign:"left"},popover:{pointerEvents:"none"},paper:{padding:e.spacing(2)}}}))(Q),Z=(a(166),a(3)),$=a.n(Z),ee=a(11),te=a(38);te.a.set("WEBGL_PACK",!1);var ae=function(){function e(t,a){Object(P.a)(this,e);var n=0;n=1,this.path_style_network="/Artistify.ai"+t.substring(n),this.path_transformer_network="/Artistify.ai"+a.substring(n),console.log("/Artistify.ai"+this.path_style_network.substring(n))}return Object(z.a)(e,[{key:"donwloadModel",value:function(e,t){var a=this;Promise.all([this.loadModelFromPath(this.path_style_network),this.loadModelFromPath(this.path_transformer_network)]).then((function(t){var n=Object(i.a)(t,2),r=n[0],o=n[1];a.styleNetwork=r,a.transformerNetwork=o,e()})).catch((function(e){t()}))}},{key:"loadModelFromPath",value:function(){var e=Object(ee.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.c(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setValueAccessors",value:function(e,t,a){this.contentRef=e,this.styleRef=t,this.outputRef=a}},{key:"generateStyledImage",value:function(){var e=Object(ee.a)($.a.mark((function e(t,a,n){var r,o,l,i,s=this;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.d();case 2:return e.next=4,te.d();case 4:return e.next=6,te.d();case 6:return e.prev=6,e.next=9,te.f((function(){return s.styleNetwork.predict(te.b.fromPixels(s.styleRef.current).toFloat().div(te.e(255)).expandDims())}));case 9:if(r=e.sent,1===t){e.next=20;break}return e.next=13,te.f((function(){return s.styleNetwork.predict(te.b.fromPixels(s.contentRef.current).toFloat().div(te.e(255)).expandDims())}));case 13:return o=e.sent,l=r,e.next=17,te.f((function(){var e=l.mul(te.e(t)),a=o.mul(te.e(1-t));return e.addStrict(a)}));case 17:r=e.sent,o.dispose(),l.dispose();case 20:return e.next=22,te.f((function(){return s.transformerNetwork.predict([te.b.fromPixels(s.contentRef.current).toFloat().div(te.e(255)).expandDims(),r]).squeeze()}));case 22:return i=e.sent,e.next=25,te.d();case 25:return a(this.contentRef.current.src),e.next=28,te.b.toPixels(i,this.outputRef.current);case 28:r.dispose(),i.dispose(),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(6),n();case 35:case"end":return e.stop()}}),e,this,[[6,32]])})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),ne=function(e){Object(M.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).onSliderValueChange=function(e,t){n.setState({strength:t})},n.handlePopoverOpen=function(e){n.setState({anchorEl:e.currentTarget})},n.handlePopoverClose=function(){n.setState({anchorEl:null})},n.onBeginStylization=function(){n.setState({isDisabled:!0}),n.resetAndBegin()},n.refreshPage=function(){window.location.reload()},n.resetAndBegin=function(){n.setState({contentSrc:null,loading:0,stepper:0,height:n.contentRef.current.height,width:n.contentRef.current.width},(function(){n.styleTranferModel.generateStyledImage(n.state.strength,(function(e){n.setState({stepper:-1,contentSrc:e,loading:1,isDisabled:!1})}),(function(){n.setState({snackbarMessage:"Error while generating image",isDisabled:!1})}))}))},n.state={isDisabled:!1,strength:1,anchorEl:null,contentSrc:null,height:300,loading:-2},n.contentRef=r.a.createRef(),n.styleRef=r.a.createRef(),n.outputRef=r.a.createRef(),n.styleTranferModel=new ae(n.props.styleNetPath,n.props.transferNetPath),n.styleTranferModel.donwloadModel((function(){n.setState({loading:-1})}),(function(){n.setState({snackbarMessage:"Couldn't Donwload Model"})})),n.styleTranferModel.setValueAccessors(n.contentRef,n.styleRef,n.outputRef),n}return Object(z.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:"container expanded-content"},r.a.createElement("div",{className:"inputs"},r.a.createElement(Y,{isDisabled:this.state.isDisabled,refObject:this.contentRef}),r.a.createElement(X,{isDisabled:this.state.isDisabled,refObject:this.styleRef})),r.a.createElement("br",null),r.a.createElement("div",{className:"outputs"},r.a.createElement("div",{className:"selector-container"},r.a.createElement("div",{className:t.formControl,style:{marginBottom:".1rem",display:"inline-block",verticalAlign:"middle"}},this.state.loading>-1?0!==this.state.loading?r.a.createElement("canvas",{ref:this.outputRef,className:"center margin",height:this.state.height,alt:"content_img"}):r.a.createElement(H.a,{className:"center margin",variant:"rect",width:this.state.width,height:this.state.height}):null,r.a.createElement(b.a,{style:{display:"inline-block",marginRight:"6px",marginLeft:5}},"Stylization Strength"),r.a.createElement(B.a,{fontSize:"small",color:"action",style:{marginBottom:-4},"aria-owns":this.state.anchorEl?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:this.handlePopoverOpen,onMouseLeave:this.handlePopoverClose}),r.a.createElement(I.a,{id:"mouse-over-popover",className:t.popover,classes:{paper:t.paper},open:this.state.anchorEl,anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},onClose:this.state.handlePopoverClose,disableRestoreFocus:!0},r.a.createElement(b.a,{style:{maxWidth:200,textAlign:"center"}},"Stylization strength is the degree of stylization that is applied. Going left inclines the output closer to the content image while going right deviates it more towards the style image.")),r.a.createElement("br",null),r.a.createElement(q,{className:t.formControl,sliderChangeHandler:this.onSliderValueChange,value:this.state.strength,min:0,max:1,step:.01,disabled:this.state.isDisabled}),r.a.createElement("br",null),r.a.createElement(D.a,{className:t.formControl,variant:"contained",size:"large",color:"secondary",onClick:this.onBeginStylization,disabled:this.state.isDisabled||-2===this.state.loading},-2===this.state.loading?"Downloading Model":"Begin Stylization"),r.a.createElement("br",null)))),r.a.createElement(F.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.snackbarMessage,autoHideDuration:3e3,onClose:function(){return e.setState({snackbarMessage:""})},message:this.state.snackbarMessage,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{color:"secondary",size:"small",onClick:this.refreshPage},"Reload"))}))}}]),a}(r.a.Component),re=Object(T.a)((function(e){return{formControl:{margin:e.spacing(1),marginLeft:0,marginRight:0,width:"100%",maxWidth:600,textAlign:"left"},popover:{pointerEvents:"none"},paper:{padding:e.spacing(2)}}}))(ne),oe=(a(187),a(138)),le=a.n(oe),ie=a(139),se=a.n(ie),ce=Object(u.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?"#424242":"#eeeeee",padding:"32px 8px"}}})),me=function(e){var t=ce();return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:"container"},r.a.createElement(b.a,{color:"textSecondary"},"Made with ",r.a.createElement(le.a,{fontSize:"small",style:{color:"#b71c1c",marginBottom:"-3px"}})," by ",r.a.createElement("b",null,"Rahul Jha")),r.a.createElement("a",{href:"https://github.com/rahul-jha98",rel:"noopener noreferrer",target:"_blank",style:{textDecoration:"none"}},r.a.createElement(y.a,{className:"fa",color:"action",fontSize:"small"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/rahul-jha-84a204178/",rel:"noopener noreferrer",target:"_blank",style:{textDecoration:"none"}},r.a.createElement(se.a,{className:"fa",color:"action",fontSize:"small"}))))},ue=Object(s.a)({palette:{secondary:{main:"#0091ea"}}}),he=function(e){return r.a.createElement(c.a,{theme:ue},r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null),r.a.createElement(R,null),r.a.createElement("div",{className:"content-area"},r.a.createElement(re,{styleNetPath:"./models/lite/style/model.json",transferNetPath:"./models/lite/transformer/model.json"}),r.a.createElement(me,null))))},de=Object(s.a)({palette:{type:"dark",primary:{main:"#5768c9"},secondary:{main:"#0091ea"}}}),ge=function(e){return console.log(de.palette.primary.main),r.a.createElement(c.a,{theme:de},r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null),r.a.createElement(R,null),r.a.createElement("div",{className:"content-area"},r.a.createElement(re,{styleNetPath:"./models/pro/style/model.json",transferNetPath:"./models/lite/transformer/model.json"}),r.a.createElement(me,null))))};var pe=function(){var e=r.a.useState(0),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{className:"App"},0===a?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return n(1)}},"Lite Mode"),r.a.createElement("button",{onClick:function(){return n(2)}},"Pro Mode")):1===a?r.a.createElement(he,null):r.a.createElement(ge,null))};l.a.render(r.a.createElement(pe,null),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.73da4559.chunk.js.map